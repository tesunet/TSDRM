{% extends "base1.html" %}

{% block title %}虚机资源管理{% endblock %}

{% block content %}





    <section class="scrollable wrapper">

        <span class="sr-only">90% 完成（成功）</span>
        </div>
        <ul class="breadcrumb">
            <li><a href="/index"><i class="fa fa-home"></i>首页</a></li>
            <li>资源管理</li>
            <li class="active">虚机资源管理</li>
        </ul>
        <section class="panel panel-default">
            <header class="panel-heading">
                虚机资源管理
            </header>
            <div style="height:10px"></div>
            <div class="table-toolbar">
                <div class="row">
                    <div class="col-md-6">
                        <div class="btn-group">
                            <button id="new" type="button" data-toggle="modal" data-target="#static" class="btn green">
                                新增
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-bordered table-hover table-checkable order-column" id="sample_1">
                <thead>
                <tr>
                    <th style="width:40px;"> 序号</th>
                    <th> 实例名称</th>
                    <th> 模板名称</th>
                    <th> 虚机名称</th>
                    <th> CPU</th>
                    <th> 内存(MB)</th>
                    <th> 磁盘空间(GB)</th>
                    <th> 运行状态</th>
                    <th style="width:55px;"> 操作</th>
                </tr>
                </thead>

                <tbody>

                </tbody>
            </table>


            <div id="static" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog" style="width:900px;">


                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">虚机资源管理</h4>
                        </div>
                        <div class="modal-body" style="margin-bottom:40px">
                            <div id="myTabContent1" class="tab-content">
                                <div>
                                    <form class="bs-example form-horizontal activate-form"
                                          id="formactivate">{% csrf_token %}
                                        <div class="form-body">
                                            <div class="form-group ">
                                                <label class="col-md-2 control-label">虚机模板</label>
                                                <div class="col-md-10">
                                                    <div class="input-group">
                                                        <div id="templatediv" class="input-group-control">
                                                            <input id="template_id" hidden type="text"
                                                                   name="template_id">
                                                            <input id="template_name" readonly type="text"
                                                                   name="template_name"
                                                                   class="form-control ">
                                                            <div class="form-control-focus"></div>
                                                        </div>
                                                        <span class="input-group-btn btn-right">
                                                            <button type="button" id="bt_select" class="btn green"
                                                                    tabindex="-1"
                                                                    data-toggle="modal"
                                                                    data-target="#static1">选择</button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="form-group ">
                                                <input id="id" hidden type="text" name="id">
                                                <input id="clone_tag" hidden type="text" name="clone_tag">
                                                <input type="text" value="" name="poolid" id="poolid" hidden>
                                                <input id="uuid" name="uuid" type="hidden">
                                            </div>
                                            <div class="form-group ">
                                                <label class="col-md-2 control-label">CPU</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="cpu" id="cpu_" readonly>
                                                </div>

                                                <label class="col-md-2 control-label">内存(MB)</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="memory" id="memory_" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <label class="col-md-2 control-label">磁盘空间(GB)</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="disk" id="disk_" readonly>
                                                    <div class="form-control-focus"></div>
                                                </div>

                                                <label class="col-md-2 control-label">模板虚机名称</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="name" id="name" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <label class="col-md-2 control-label">数据中心</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="datacenter" id="datacenter" readonly>
                                                </div>

                                                <label class="col-md-2 control-label">集群</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="cluster" id="cluster" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-2 control-label">实例名称</label>
                                                <div class="col-md-4">
                                                    <input id="instancename" autocomplete="off" type="text"
                                                           name="instancename"
                                                           class="form-control" value="">
                                                    <div class="form-control-focus"></div>

                                                </div>
                                                <label class="col-md-2 control-label">新虚机名称</label>
                                                <div class="col-md-4">
                                                    <input id="currentvm" autocomplete="off" type="text"
                                                           name="currentvm"
                                                           class="form-control" value="">
                                                    <div class="form-control-focus"></div>

                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <label class="col-md-2 control-label">IP</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="ip" id="ip" readonly>
                                                    <div class="form-control-focus"></div>
                                                </div>

                                                <label class="col-md-2 control-label">主机名</label>
                                                <div class="col-md-4">
                                                    <input type="text" autocomplete="off" class="form-control" value=""
                                                           name="hostname" id="hostname" readonly>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-2 control-label">系统</label>
                                                <div class="col-md-10">
                                                    <input id="system" autocomplete="off" type="text" name="system"
                                                           readonly
                                                           class="form-control">
                                                    <div class="form-control-focus"></div>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-md-2 control-label">说明</label>
                                                <div class="col-md-10">
                                                    <input id="description" autocomplete="off" type="text"
                                                           name="description"
                                                           class="form-control">
                                                    <div class="form-control-focus"></div>

                                                </div>
                                            </div>


                                        </div>

                                        <div class="form-actions ">
                                            <div class="modal-footer">
                                                <div id="div1">
                                                    <button type="button" id="clone" name="clone"
                                                            class="btn btn-primary center-block btn-lg">克隆
                                                    </button>
                                                </div>
                                                <div id="div2">
                                                    <div class="progress">
                                                        <div id="progress" class="progress-bar" role="progressbar"
                                                             aria-valuenow="60"
                                                             aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                                                            <span>克隆中 </span>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <button type="button" id="refresh" name="refresh"
                                                                class="btn btn-primary center-block btn-lg">刷新
                                                        </button>
                                                    </div>

                                                </div>
                                                <div id="div3" align="center">
                                                    <button type="button" id="bt_ip" class="btn green" tabindex="-1"
                                                            data-toggle="modal"
                                                            data-target="#static2">修改IP
                                                    </button>
                                                    <button type="button" id="bt_hostname" class="btn green"
                                                            tabindex="-1" data-toggle="modal"
                                                            data-target="#static3">修改主机名
                                                    </button>
                                                    <button type="button" id="bt_installcv" class="btn green"
                                                            tabindex="-1" data-toggle="modal"
                                                            data-target="#static4">安装客户端
                                                    </button>
                                                    <button type="button" id="bt_registercv" name="bt_registercv"
                                                            class="btn green">注册客户端
                                                    </button>
                                                    <button type="button" id="bt_adddisk" class="btn green"
                                                            tabindex="-1" data-toggle="modal"
                                                            data-target="#static6">新增磁盘
                                                    </button>
                                                    <hr>
                                                    <div id="onstate">
                                                        <button type="button" id="bt_shutdown"
                                                                class="btn btn-primary btn-lg">关机
                                                        </button>
                                                        <button type="button" id="bt_reboot"
                                                                class="btn btn-primary btn-lg">重启
                                                        </button>
                                                    </div>

                                                    <div id="offstate">
                                                        <button type="button" id="bt_startup"
                                                                class="btn btn-primary center-block btn-lg">启动
                                                        </button>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="static1" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog" style="width:800px;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                        </div>
                        <div class="modal-body">
                            <table class="table table-striped table-bordered table-hover table-checkable order-column"
                                   id="sample_2">
                                <thead>
                                <tr>
                                    <th style="width:40px;"> 序号</th>
                                    <th> 模板名称</th>
                                    <th> 虚机名称</th>
                                    <th> 说明</th>
                                    <th style="width:55px;"> 操作</th>
                                </tr>
                                </thead>

                                <tbody>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="static2" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">


                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">修改IP</h4>
                        </div>
                        <div class="modal-body" style="margin-bottom:40px">
                            <form class="bs-example form-horizontal activate-form">
                                <div class="form-body">
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">脚本路径</label>
                                        <div class="col-md-10">
                                            <input type="text" autocomplete="off" class="form-control" value="E:\ip.bat"
                                                   name="ip_path" id="ip_path">
                                        </div>

                                    </div>
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">IP</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="ip_ip" id="ip_ip">
                                        </div>

                                        <label class="col-md-2 control-label">子网掩码</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="ip_mask" id="ip_mask">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">网关</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="ip_gateway" id="ip_gateway">
                                            <div class="form-control-focus"></div>
                                        </div>

                                        <label class="col-md-2 control-label">DNS</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="ip_dns" id="ip_dns">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">用户名</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="ip_user" id="ip_user">
                                        </div>

                                        <label class="col-md-2 control-label">密码</label>
                                        <div class="col-md-4">
                                            <input type="password" autocomplete="off" class="form-control" value=""
                                                   name="ip_password" id="ip_password">
                                        </div>
                                    </div>

                                    <div>
                                        <button type="button" id="ipsave" name="clone"
                                                class="btn btn-primary center-block btn-lg">确定
                                        </button>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div id="static3" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">修改主机名</h4>
                        </div>
                        <div class="modal-body" style="margin-bottom:40px">
                            <form class="bs-example form-horizontal activate-form">
                                <div class="form-body">

                                    <div class="form-group ">

                                        <label class="col-md-2 control-label">脚本路径</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control"
                                                   value="E:\hostname.bat" name="host_path" id="host_path">
                                        </div>
                                        <label class="col-md-2 control-label">主机名</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="host_name" id="host_name">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">用户名</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="host_user" id="host_user">
                                        </div>

                                        <label class="col-md-2 control-label">密码</label>
                                        <div class="col-md-4">
                                            <input type="password" autocomplete="off" class="form-control" value=""
                                                   name="host_password" id="host_password">
                                        </div>
                                    </div>

                                    <div>
                                        <button type="button" id="hostsave" name="clone"
                                                class="btn btn-primary center-block btn-lg">确定
                                        </button>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div id="static4" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">


                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">安装commvault客户端</h4>
                        </div>
                        <div class="modal-body" style="margin-bottom:40px">
                            <form class="bs-example form-horizontal activate-form">
                                <div class="form-body">

                                    <div class="form-group ">

                                        <label class="col-md-2 control-label">脚本路径</label>
                                        <div class="col-md-8">
                                            <input type="text" autocomplete="off" class="form-control"
                                                   value="E:\installcv.bat" name="installcv_path" id="installcv_path">
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">用户名</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="installcv_user" id="installcv_user">
                                        </div>

                                        <label class="col-md-2 control-label">密码</label>
                                        <div class="col-md-4">
                                            <input type="password" autocomplete="off" class="form-control" value=""
                                                   name="installcv_password" id="installcv_password">
                                        </div>
                                    </div>

                                    <div>
                                        <button type="button" id="installcvsave" name="installcvsave"
                                                class="btn btn-primary center-block btn-lg">确定
                                        </button>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div id="static6" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">


                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">新增磁盘</h4>
                        </div>
                        <div class="modal-body" style="margin-bottom:40px">
                            <form class="bs-example form-horizontal activate-form">
                                <div class="form-body">

                                    <div class="form-group ">

                                        <label class="col-md-2 control-label">容量(GB)</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="disksize" id="disksize">
                                        </div>
                                        <label class="col-md-2 control-label">磁盘类型</label>
                                        <div class="col-md-4">
                                            <select class="form-control" id="disktype" name="disktype"
                                                    form="formactivate">
                                                <option value='thick'>thick</option>
                                                <option value='thin'>thin</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">脚本路径</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control"
                                                   value="E:\initializeDisk.bat"
                                                   name="disk_path" id="disk_path">
                                        </div>
                                        <label class="col-md-2 control-label">所选磁盘</label>
                                        <div class="col-md-4">
                                            <select class="form-control" id="selectdisk" name="selectdisk"
                                                    form="formactivate">
                                                <option value='F'>F盘</option>
                                                <option value='G'>G盘</option>
                                                <option value='H'>H盘</option>
                                                <option value='I'>I盘</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <label class="col-md-2 control-label">用户名</label>
                                        <div class="col-md-4">
                                            <input type="text" autocomplete="off" class="form-control" value=""
                                                   name="disk_user" id="disk_user">
                                        </div>

                                        <label class="col-md-2 control-label">密码</label>
                                        <div class="col-md-4">
                                            <input type="password" autocomplete="off" class="form-control" value=""
                                                   name="disk_password" id="disk_password">
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <button type="button" id="disksave" name="clone"
                                            class="btn btn-primary center-block btn-lg">确定
                                    </button>
                                </div>
                        </div>

                        </form>
                    </div>
                </div>
            </div>
            </div>


        </section>


    </section>

{% endblock %}

{% block script %}
    <script>
        $.ajaxSetup({
            data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
        });
    </script>
    <link href="/static/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet"
          type="text/css"/>
    <link href="/static/assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet"
          type="text/css"/>
    <link href="/static/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css"
          rel="stylesheet" type="text/css"/>

    <script src="/static/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
    <script src="/static/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js"
            type="text/javascript"></script>
    <script src="/static/assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js"
            type="text/javascript"></script>
    <script src="/static/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="/static/assets/pages/scripts/components-select2.min.js" type="text/javascript"></script>
    <script src="/static/assets/global/plugins/jstree/dist/jstree.min.js" type="text/javascript"></script>
    <script src="/static/assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js"
            type="text/javascript"></script>
    <script src="/static/myjs/vmlistmanage.js" type="text/javascript"></script>
{% endblock %}
